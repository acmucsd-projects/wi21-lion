<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: navbar/Navbar.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: navbar/Navbar.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useRef, useState } from 'react'
import TabItem from './TabItem';
import './NavStyles.css';



const topSections = [
  { id: "classes", name: "CLASSES" },
  { id: "csports", name: "CLUB SPORTS" },
  { id: "nsports", name: "NCAA SPORTS" },
  { id: "aorgs", name: "ACADEMIC ORGS" },
  { id: "sorgs", name: "SOCIAL ORGS" }, 
]
const sectionsMid = {
  classes: [
    { id: "CSE", name: "CSE" },
    { id: "MATH", name: "MATH" },
    { id: "ECE", name: "ECE" },
    { id: "COGS", name: "COGS" },
    { id: "BIO", name: "BIO" },
    { id: "CAT", name: "CAT" },
  ],
  csports: [
    { id: "cswim", name: "SWIM" },
    { id: "csoccer", name: "SOCCER" },
    { id: "cwapo", name: "WATER POLO" },
    { id: "csurf", name: "SURF" },
    { id: "cbaseball", name: "BASEBALL" },
    { id: "cbball", name: "BASEBALL" },
  ]
}
const sectionsLow = {
  CSE: [
    { id: "3", name: "3" },
    { id: "5", name: "5" },
    { id: "8A", name: "8A" },
    { id: "8B", name: "8B" },
    { id: "11", name: "11" },
    { id: "12", name: "12" },
    { id: "15L", name: "15L" },
    { id: "20", name: "20" },
    { id: "21", name: "21" },
    { id: "30", name: "30" },
  ]
}
const dynamicDepth = {
  gang: [{ id: "gang", name: "gang"}]
}


/**
 * Hook that alerts clicks outside of the passed ref
 */
function useOutsideAlerter(ref, handleTabClick) {
  useEffect(() => {
      /**
       * Alert if clicked on outside of element
       */
      function handleClickOutside(event) {
          if (ref.current &amp;&amp; !ref.current.contains(event.target)) {
              handleTabClick(1, "", -1);
          }
      }
      // Bind the event listener
      document.addEventListener("mousedown", handleClickOutside);
      return () => {
          // Unbind the event listener on clean up
          document.removeEventListener("mousedown", handleClickOutside);
      };
  }, [ref, handleTabClick]);
}



export default function Navbar() {

  // arrays of arrays, each array is a deeper section
  const [sections, setSections] = useState([]);
  const topNav = topSections;
  const [isTopNavShrunk, setIsTopNavShrunk] = useState(""); // is top nav shrunk
  const [activeItems, setActiveItems] = useState([]); // array of active list item indices

  // detect click outside
  const wrapperRef = useRef(null);
  useOutsideAlerter(wrapperRef, handleTabClick);

  // open or collapse tabs
  function handleTabClick(id, name, depth) {

    // disable query if we click on the header
    if (id === 0) return;

    // ***mock api call replace with actual backend call***
    let queryData;
    switch(depth) {
      case -1: queryData = []
      break;
      case 0: queryData = sectionsMid[id];
      break;
      case 1: queryData = sectionsLow[id];
      break;
      case 2: queryData = dynamicDepth['gang'];
      break;
      default: queryData = undefined;
    } 

    // check if query data returned a list
    if (queryData === undefined) return;

    // add selected section to new list
    queryData = [{ id: 0, name: name}, ...queryData];

    // set the state
    let updatedSections = [...sections];
    let updatedActiveItems = [...activeItems];

    updatedSections[depth] = queryData;
    updatedSections.length = depth + 1;

    updatedActiveItems[depth] = id;
    updatedActiveItems.length = depth + 1;
    console.log(updatedSections)
    setSections(updatedSections);
    setActiveItems(updatedActiveItems);

    // shrink top level if there are more elements
    if (depth >= 0) setIsTopNavShrunk(true);
    else setIsTopNavShrunk(false);
  }

  // separate main tab from small tabs
  return (
    &lt;nav id="navbar" ref={wrapperRef}>
      &lt;ul id="top-nav" className={isTopNavShrunk ? "shrink" : ""}>
        {topNav.map(listItem => {
          let isActive = activeItems[0] === listItem.id ? true : false;
          return &lt;TabItem 
            listItem={listItem}
            isActive={isActive}
            depth={0} 
            key={listItem.id} 
            handleTabItemClick={handleTabClick}/>
        })}
      &lt;/ul>

      {sections.map((list, index) => (
        &lt;ul key={index+list[0].name} style={{ zIndex: 0 - index }}>
          {list.map(listItem => {
            let isActive = activeItems[index+1] === listItem.id ? true : false;
            return &lt;TabItem 
              listItem={listItem}
              isActive={isActive}
              depth={index+1} 
              key={listItem.id} 
              handleTabItemClick={handleTabClick}/>
          })}
        &lt;/ul>
      ))}
    &lt;/nav>
  )
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#CourseArticle">CourseArticle</a></li><li><a href="global.html#LinkEntry">LinkEntry</a></li><li><a href="global.html#LinksPanel">LinksPanel</a></li><li><a href="global.html#OrgArticle">OrgArticle</a></li><li><a href="global.html#PathItem">PathItem</a></li><li><a href="global.html#querySearch">querySearch</a></li><li><a href="global.html#SectionContent">SectionContent</a></li><li><a href="global.html#updateSelectedArticleType">updateSelectedArticleType</a></li><li><a href="global.html#updateSelectedCourse">updateSelectedCourse</a></li><li><a href="global.html#useOutsideAlerter">useOutsideAlerter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Tue Mar 23 2021 19:10:06 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
